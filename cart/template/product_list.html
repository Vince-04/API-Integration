{% extends 'base.html' %}
{% block title %}Products - ShopLite{% endblock %}
{% block content %}
<div class="row">
  <div class="col-md-3 mb-3">
    <div class="list-group">
      <a href="{% url 'product_list' %}" class="list-group-item list-group-item-action {% if not category %}active{% endif %}">All Categories</a>
      {% for c in categories %}
        <a href="{% url 'product_list_by_category' c.slug %}" class="list-group-item list-group-item-action {% if category and category.id == c.id %}active{% endif %}">{{ c.name }}</a>
      {% empty %}
        <div class="list-group-item">No categories yet.</div>
      {% endfor %}
    </div>
  </div>
  <div class="col-md-9">
    <div class="row g-3">
      {% for p in products %}
      <div class="col-sm-6 col-lg-4">
        <div class="card h-100 shadow-sm">
          {% if p.image %}
            <img src="{{ p.image.url }}" class="card-img-top" alt="{{ p.title }}">
          {% else %}
            <svg class="bd-placeholder-img card-img-top" width="100%" height="180" xmlns="http://www.w3.org/2000/svg" role="img"><rect width="100%" height="100%"></rect></svg>
          {% endif %}
          <div class="card-body d-flex flex-column">
            <h6 class="card-title mb-1">{{ p.title }}</h6>
            <div class="text-muted small mb-2">{{ p.category.name }}</div>
            <div class="mt-auto d-flex justify-content-between align-items-center">
              <span class="fw-bold">â‚±{{ p.price }}</span>
              <a class="btn btn-sm btn-outline-primary" href="{% url 'product_detail' p.slug %}">View</a>
            </div>
          </div>
        </div>
      </div>
      {% empty %}
        <div class="col-12"><div class="alert alert-info">No products found.</div></div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
